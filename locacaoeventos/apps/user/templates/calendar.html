{% load general_tags %}
{% load i18n %}
<style>
  * {box-sizing: border-box;}
  ul {list-style-type: none;}
  body {font-family: Verdana, sans-serif; margin:0;}

  .month {
      padding: 5px 4px 5px 4px;
      width: 100%;
      background: transparent;
      text-align: center;
  }

  .month ul {
      margin: 0;
      padding: 0;
  }

  .month ul li {
      color:#484848;
      font-size: 13px;
      text-transform: capitalize;
      letter-spacing: 3px;
  }

  .month .prev {
      float: left;
      padding-top: 10px;
  }

  .month .next {
      float: right;
      padding-top: 10px;
  }
  .next a, .prev a {
    color: 484848;
    text-decoration:none;
  }
  .weekdays {
      margin: 0;
      padding: 10px 0;
      background-color: white;
  }

  .weekdays li {
      display: inline-block;
      width: 12%;
      font-size:11px;
      color: #666;
      text-align: center;
  }

  .days {
      padding: 10px 0;
      background: white;
      margin: 0;
  }

  .days li {
      list-style-type: none;
      display: inline-block;
      width: 13.6%;
      text-align: center;
      margin-bottom: 8px;
      font-size:12px;
      color: #777;
  }

  .days li .active {
      padding: 5px;
      background: #4fa7bc;
      color: white !important
  }
  .pass {
    text-decoration: line-through

  }
  .occupied {
    background-color:#dddddd;
    padding:5px;
    color:#eeeeee;
  }
  .move {
    cursor:pointer;
  }

  /* Add media queries for smaller screens */
  @media screen and (max-width:720px) {
      .weekdays li, .days li {width: 13.1%;}
  }

  @media screen and (max-width: 420px) {
      .weekdays li, .days li {width: 12.5%;}
      .days li .active {padding: 2px;}
  }

  @media screen and (max-width: 290px) {
      .weekdays li, .days li {width: 12.2%;}
  }
</style>


<div class="month">      
  <ul>
    <li class="prev"><a class="move" value-count="0" count="-1">&#10094;</a></li>
    <li class="next"><a class="move" value-count="0" count="1">&#10095;</a></li>
    <li>
      <span id="month_ajax">{{month}}</span><br>
      <span id="year_ajax">{{year}}</span>
    </li>
  </ul>
</div>

<ul class="weekdays">
  <li>Seg</li>
  <li>Ter</li>
  <li>Qua</li>
  <li>Qui</li>
  <li>Sex</li>
  <li>Sab</li>
  <li>Dom</li>
</ul>

<ul class="days" id="days_ajax">  
  {% for day in list_month %}
    {{day|safe}}
  {% endfor %}
</ul>

{% block jquery %}
    <script type="text/javascript" src="/static/base_template_user/assets/js/jquery-2.1.0.min.js"></script>
{% endblock jquery %}
<script type="text/javascript" src="/static/CUSTOM_JS/core/general.js"></script>
<script>
  $(document).ready(function(){
    $.ajax({
      url: "/usuario/ajax/calendario/",
      dataType: 'json',
      data: {
        "pk": "{{place_pk}}"
      },
      success: function (data) {
        $("#month_ajax").html(data["month"])
        $("#year_ajax").html(data["year"])
        str_days = ""
        for(i=0;i<data["list_month"].length;i++){
          str_days += data["list_month"][i]
        }
        $("#days_ajax").html(str_days)
      }
    })

  })

  $(".move").click(function(){
    var months = parseInt($(this).attr("value-count")) + parseInt($(this).attr("count"))
    $(".move").attr("value-count", months)
    $.ajax({
      url: "/usuario/ajax/calendario/",
      dataType: 'json',
      data: {
        "pk": "{{place_pk}}",
        "meses":months
      },
      success: function (data) {
        $("#month_ajax").html(data["month"])
        $("#year_ajax").html(data["year"])
        str_days = ""
        for(i=0;i<data["list_month"].length;i++){
          str_days += data["list_month"][i]
        }
        $("#days_ajax").html(str_days)
      }
    })

  })

</script>
